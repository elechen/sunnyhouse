{"version":3,"sources":["webpack:///./src/models/register.ts","webpack:///./src/views/Profile.vue?f103","webpack:///./src/views/Profile.vue?c4ea","webpack:///./src/views/Profile.vue?48f0","webpack:///./src/views/Profile.vue"],"names":["STATE","StateDesc","_a","reviewing","reviewed","left","contract","PropDesc","id","name","phone","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","staticStyle","position","margin-right","width","display","attrs","src","registerData","headimgurl","_s","font-size","color","state","_l","key","index","idimgurl","length","imgurl","style","background-image","on","click","$event","previewImg","contractid","idx","showContract","_m","addContract","_e","onSubmit","staticRenderFns","weui","__webpack_require__","Profilevue_type_script_lang_ts_Profile","_super","Profile","_this","apply","arguments","openid","isAdmin","tslib_es6","prototype","mounted","utils","$route","query","user","RequestRegisterInfo","$router","push","host","define","api","vue_property_decorator","axios","get","then","response","data","console","log","code","bPass","register","post","msg","alert","go","catch","reason","k","gallery","Profilevue_type_script_lang_ts_","views_Profilevue_type_script_lang_ts_","component","Object","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"js/profile.ac29c811.js","sourcesContent":["export enum STATE {\n  reviewing = 1, // 注册\n  reviewed, // 已审核\n  left, // 已退租\n  contract, // 待签约（客户端状态）\n}\n\nexport const StateDesc: { [key: number]: string } = {\n  [STATE.reviewing]: '待审核',\n  [STATE.reviewed]: '已审核',\n  [STATE.left]: '已退租',\n  [STATE.contract]: '待签约',\n};\n\nexport interface DATA {\n  openid?: string;\n  contractid?: string[];\n  id?: string;\n  name?: string;\n  phone?: string;\n  idimgurl?: string[];\n  state?: STATE;\n  headimgurl?: string;\n}\n\nexport const PropDesc: { [key: string]: string } = {\n  id: '身份证',\n  name: '姓名',\n  phone: '手机号',\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"Profile\"},[_c('div',{staticClass:\"weui-cells__title\"},[_vm._v(\"个人资料\")]),_c('div',{staticClass:\"weui-cells\"},[_c('div',{staticClass:\"weui-cell\"},[_c('div',{staticClass:\"weui-cell__hd\",staticStyle:{\"position\":\"relative\",\"margin-right\":\"10px\"}},[_c('img',{staticStyle:{\"width\":\"50px\",\"display\":\"block\"},attrs:{\"src\":_vm.registerData.headimgurl}})]),_c('div',{staticClass:\"weui-cell__bd\"},[_c('p',[_vm._v(_vm._s(_vm.registerData.name))]),_c('p',{staticStyle:{\"font-size\":\"13px\",\"color\":\"rgb(136, 136, 136)\"}},[_vm._v(_vm._s(_vm.StateDesc(_vm.registerData.state)))])])]),_vm._l((['name', 'id', 'phone']),function(key,index){return _c('div',{key:index,staticClass:\"weui-cell\"},[_c('div',{staticClass:\"weui-cell__bd\"},[_c('p',[_vm._v(_vm._s(_vm.PropDesc(key)))])]),_c('div',{staticClass:\"weui-cell__ft\"},[_vm._v(_vm._s(_vm.registerData[key]))])])}),_c('div',{staticClass:\"weui-cell\",attrs:{\"id\":\"uploaderCustom\"}},[_c('div',{staticClass:\"weui-cell__bd\"},[_c('div',{staticClass:\"weui-uploader\"},[_c('div',{staticClass:\"weui-uploader__hd\"},[_c('p',{staticClass:\"weui-uploader__title\"},[_vm._v(\"身份证正反面照片(\"+_vm._s(_vm.registerData.idimgurl ? _vm.registerData.idimgurl.length : 0)+\"/2)\")])]),_c('div',{staticClass:\"weui-uploader__bd\"},[_c('ul',{staticClass:\"weui-uploader__files\",attrs:{\"id\":\"uploaderCustomFiles\"}},_vm._l((_vm.registerData.idimgurl),function(imgurl,index){return _c('li',{key:index,staticClass:\"weui-uploader__file\",style:({'background-image': 'url(' + imgurl + ')'}),on:{\"click\":function($event){_vm.previewImg(imgurl)}}})}),0)])])])])],2),_c('div',[_c('div',{staticClass:\"weui-cells__title\"},[_vm._v(\"合约列表\")]),_c('div',{staticClass:\"weui-cells\"},[(_vm.registerData.contractid && _vm.registerData.contractid.length > 0)?_c('div',_vm._l((_vm.registerData.contractid),function(id,idx){return _c('a',{key:idx,staticClass:\"weui-cell weui-cell_access\",on:{\"click\":function($event){_vm.showContract(id)}}},[_c('div',{staticClass:\"weui-cell__bd\"},[_c('p',[_vm._v(\"电子合约\"+_vm._s(idx+1))])]),_c('div',{staticClass:\"weui-cell__ft\"})])}),0):_c('div',[_vm._m(0)])]),(_vm.isAdmin)?_c('div',{staticClass:\"weui-cells\"},[_c('a',{staticClass:\"weui-cell weui-cell_access\",on:{\"click\":function($event){_vm.addContract()}}},[_vm._m(1),_c('div',{staticClass:\"weui-cell__ft\"})])]):_vm._e()]),(_vm.isAdmin)?_c('div',{staticClass:\"weui-btn-area\"},[(_vm.registerData.state === 1)?_c('a',{staticClass:\"weui-btn weui-btn_primary\",on:{\"click\":function($event){_vm.onSubmit(true)}}},[_vm._v(\"审核通过\")]):_vm._e(),_c('a',{staticClass:\"weui-btn weui-btn_default\",on:{\"click\":function($event){_vm.onSubmit(false)}}},[_vm._v(\"打回重填\")])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"weui-loadmore weui-loadmore_line\"},[_c('span',{staticClass:\"weui-loadmore__tips\"},[_vm._v(\"暂无数据\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"weui-cell__bd\"},[_c('p',[_vm._v(\"新增合约\")])])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator';\nconst weui = require('weui.js');\nimport * as user from '@/models/user';\nimport * as register from '@/models/register';\nimport * as define from '@/defines/define';\nimport * as utils from '@/utils/utils';\n\n@Component\nexport default class Profile extends Vue {\n  private openid: string | undefined = '';\n  private registerData: register.DATA = {};\n  private isAdmin = false;\n  private mounted() {\n    this.isAdmin = utils.IsAdmin();\n    this.openid = this.$route.query.openid as string;\n    if (!this.openid) {\n      this.openid = user.get() ? (user.get() as user.User).openid : '';\n    }\n    if (!this.openid) {\n      this.$router.push('/login');\n      return;\n    }\n    this.RequestRegisterInfo(this.openid);\n  }\n\n  private RequestRegisterInfo(openid?: string) {\n    const host = define.API_HOST;\n    const api = host + '/sunnyhouse/register?openid=' + openid;\n    Vue.axios.get(api).then((response) => {\n      const data = response.data;\n      console.log('RegisterInfo', data);\n      if (data && data.code === 'SUCCESS') {\n        this.registerData = data.data as register.DATA;\n      }\n    });\n  }\n\n  private onSubmit(bPass: boolean) {\n    const host = define.API_HOST;\n    const api = host + '/sunnyhouse/register/state';\n    const state = bPass ? register.STATE.reviewed : register.STATE.reviewing;\n    Vue.axios.post(api, { openid: this.openid, state }).then((response) => {\n      const data = response.data;\n      console.log('RegisterInfo', data);\n      if (data && data.msg) {\n        weui.alert('提交失败:' + data.msg);\n      } else if (data && data.code === 'SUCCESS') {\n        this.$router.go(-1);\n      } else {\n        weui.alert('服务器异常:' + response);\n      }\n    }).catch((reason) => {\n      weui.alert('网络异常:' + reason);\n    });\n  }\n\n  private PropDesc(k: string): string {\n    return register.PropDesc[k];\n  }\n\n  private StateDesc(k: number): string {\n    return register.StateDesc[k];\n  }\n\n  private previewImg(imgurl: string) {\n    weui.gallery(imgurl);\n  }\n\n  private showContract(id: string) {\n    this.$router.push('contract?contractid=' + id);\n  }\n\n  private addContract() {\n    this.$router.push('contract?openid=' + this.openid);\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Profile.vue?vue&type=template&id=336f1357&\"\nimport script from \"./Profile.vue?vue&type=script&lang=ts&\"\nexport * from \"./Profile.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Profile.vue\"\nexport default component.exports"],"sourceRoot":""}