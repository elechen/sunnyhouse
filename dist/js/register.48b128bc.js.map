{"version":3,"sources":["webpack:///./src/models/register.ts","webpack:///./src/views/Register.vue?b604","webpack:///./src/views/Register.vue?d931","webpack:///./src/views/Register.vue?6d77","webpack:///./src/views/Register.vue"],"names":["STATE","StateDesc","_a","reviewing","reviewed","left","contract","PropDesc","id","name","phone","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","staticStyle","position","margin-right","width","display","attrs","src","loginUser","headimgurl","_s","nickname","font-size","color","stateMsg","shortMsg","_m","directives","rawName","value","formData","expression","required","placeholder","domProps","on","input","$event","target","composing","$set","type","pattern","notMatchTips","click","onGetVerificationCode","uploadCustomFileList","length","onPreviewImg","_l","registerData","imgurl","index","key","style","background-image","for","$router","push","onSubmit","_e","staticRenderFns","accept","multiple","weui","__webpack_require__","Registervue_type_script_lang_ts_Home","_super","Home","_this","apply","arguments","openid","isAdmin","uploadCustomFileUrl","tslib_es6","prototype","mounted","user","utils","RegisterWeUI","RequestRegisterData","host","define","api","vue_property_decorator","axios","get","then","response","data","console","log","code","userData","that","uploader","url","auto","onQueued","idimgurl","onBeforeQueued","files","indexOf","alert","size","cnt","maxCnt","onSuccess","ret","uploadImageCallback","onError","err","uploadImage","cb","forEach","file","upload","e","classList","contains","parentNode","getAttribute","parseInt","match","replace","gallery","onDelete","confirm","i","len","undefined","splice","remove","hide","form","validate","error","JSON","stringify","PostFormData","loading_1","loading","urls","regexp","IDNUM","state","register","post","msg","toast","duration","Registervue_type_script_lang_ts_","views_Registervue_type_script_lang_ts_","component","Object","componentNormalizer","options","__file","__webpack_exports__"],"mappings":"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","file":"js/register.48b128bc.js","sourcesContent":["export enum STATE {\n  reviewing = 1, // 注册\n  reviewed, // 已审核\n  left, // 已退租\n  contract, // 待签约（客户端状态）\n}\n\nexport const StateDesc: { [key: number]: string } = {\n  [STATE.reviewing]: '待审核',\n  [STATE.reviewed]: '已审核',\n  [STATE.left]: '已退租',\n  [STATE.contract]: '待签约',\n};\n\nexport interface DATA {\n  openid?: string;\n  contractid?: string[];\n  id?: string;\n  name?: string;\n  phone?: string;\n  idimgurl?: string[];\n  state?: STATE;\n  headimgurl?: string;\n}\n\nexport const PropDesc: { [key: string]: string } = {\n  id: '身份证',\n  name: '姓名',\n  phone: '手机号',\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"Home\"},[_c('div',{staticClass:\"weui-cells__title\"},[_vm._v(\"注册页面\")]),_c('div',{staticClass:\"weui-cells\"},[_c('div',{staticClass:\"weui-cell\"},[_c('div',{staticClass:\"weui-cell__hd\",staticStyle:{\"position\":\"relative\",\"margin-right\":\"10px\"}},[_c('img',{staticStyle:{\"width\":\"50px\",\"display\":\"block\"},attrs:{\"src\":_vm.loginUser.headimgurl}})]),_c('div',{staticClass:\"weui-cell__bd\"},[_c('p',[_vm._v(\"你好，\"+_vm._s(_vm.loginUser.nickname))]),_c('p',{staticStyle:{\"font-size\":\"13px\",\"color\":\"#888888\"}},[_vm._v(_vm._s(_vm.stateMsg))])])])]),_c('div',{attrs:{\"id\":\"form\"}},[_c('div',{staticClass:\"weui-cells__title\"},[_vm._v(_vm._s(_vm.shortMsg))]),_c('div',{staticClass:\"weui-cells weui-cells_form\"},[_c('div',{staticClass:\"weui-cell\"},[_vm._m(0),_c('div',{staticClass:\"weui-cell__bd\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formData.name),expression:\"formData.name\"}],staticClass:\"weui-input\",attrs:{\"required\":\"\",\"placeholder\":\"请输入姓名\"},domProps:{\"value\":(_vm.formData.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.formData, \"name\", $event.target.value)}}})])]),_c('div',{staticClass:\"weui-cell\"},[_vm._m(1),_c('div',{staticClass:\"weui-cell__bd\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formData.id),expression:\"formData.id\"}],staticClass:\"weui-input\",attrs:{\"type\":\"text\",\"required\":\"\",\"pattern\":\"REG_IDNUM\",\"placeholder\":\"请输入身份证号\",\"notMatchTips\":\"请输入正确的身份证号码\"},domProps:{\"value\":(_vm.formData.id)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.formData, \"id\", $event.target.value)}}})])]),_c('div',{staticClass:\"weui-cell weui-cell_vcode\"},[_vm._m(2),_c('div',{staticClass:\"weui-cell__bd\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formData.phone),expression:\"formData.phone\"}],staticClass:\"weui-input\",attrs:{\"type\":\"number\",\"required\":\"\",\"pattern\":\"[0-9]{11}\",\"placeholder\":\"请输入手机号\",\"notMatchTips\":\"请输入正确的手机号\"},domProps:{\"value\":(_vm.formData.phone)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.formData, \"phone\", $event.target.value)}}})]),_c('div',{staticClass:\"weui-cell__ft\"},[_c('button',{staticClass:\"weui-vcode-btn\",on:{\"click\":_vm.onGetVerificationCode}},[_vm._v(\"获取验证码\")])])]),_c('div',{staticClass:\"weui-cell\"},[_vm._m(3),_c('div',{staticClass:\"weui-cell__bd\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.formData.code),expression:\"formData.code\"}],staticClass:\"weui-input\",attrs:{\"required\":\"\",\"type\":\"number\",\"placeholder\":\"请输入验证码\"},domProps:{\"value\":(_vm.formData.code)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.formData, \"code\", $event.target.value)}}})])]),_c('div',{staticClass:\"weui-cell\",attrs:{\"id\":\"uploaderCustom\"}},[_c('div',{staticClass:\"weui-cell__bd\"},[_c('div',{staticClass:\"weui-uploader\"},[_c('div',{staticClass:\"weui-uploader__hd\"},[_c('p',{staticClass:\"weui-uploader__title\"},[_vm._v(\"上传身份证正反面照片(\"+_vm._s(_vm.uploadCustomFileList.length)+\"/2)\")])]),_c('div',{staticClass:\"weui-uploader__bd\"},[_c('ul',{staticClass:\"weui-uploader__files\",attrs:{\"id\":\"uploaderCustomFiles\"},on:{\"click\":_vm.onPreviewImg}},_vm._l((_vm.registerData.idimgurl),function(imgurl,index){return _c('li',{key:index,staticClass:\"weui-uploader__file\",style:({'background-image': 'url(' + imgurl + ')'})})}),0),_vm._m(4)])])])])]),_c('label',{staticClass:\"weui-agree\",attrs:{\"for\":\"weuiAgree\"}},[_c('input',{staticClass:\"weui-agree__checkbox\",attrs:{\"id\":\"weuiAgree\",\"type\":\"checkbox\"}}),_c('span',{staticClass:\"weui-agree__text\"},[_vm._v(\"\\n        阅读并同意\\n        \"),_c('a',{on:{\"click\":function($event){_vm.$router.push('/agreement');}}},[_vm._v(\"《相关条款》\")])])]),_c('div',{staticClass:\"weui-btn-area\"},[_c('a',{staticClass:\"weui-btn weui-btn_primary\",on:{\"click\":_vm.onSubmit}},[_vm._v(\"确定\")]),(_vm.isAdmin)?_c('a',{staticClass:\"weui-btn weui-btn_default\",on:{\"click\":function($event){_vm.$router.push('/manager');}}},[_vm._v(\"管理\")]):_vm._e()])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"weui-cell__hd\"},[_c('label',{staticClass:\"weui-label\"},[_vm._v(\"姓名\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"weui-cell__hd\"},[_c('label',{staticClass:\"weui-label\"},[_vm._v(\"身份证\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"weui-cell__hd\"},[_c('label',{staticClass:\"weui-label\"},[_vm._v(\"手机号\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"weui-cell__hd\"},[_c('label',{staticClass:\"weui-label\"},[_vm._v(\"验证码\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"weui-uploader__input-box\"},[_c('input',{staticClass:\"weui-uploader__input\",attrs:{\"id\":\"uploaderCustomInput\",\"type\":\"file\",\"accept\":\"image/*\",\"multiple\":\"\"}})])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator';\nconst weui = require('weui.js');\nimport * as user from '@/models/user';\nimport * as define from '@/defines/define';\nimport * as utils from '@/utils/utils';\nimport * as register from '@/models/register.ts';\n\ninterface FORMDATA extends register.DATA {\n  code?: string;\n}\n\n@Component\nexport default class Home extends Vue {\n  private loginUser: user.User = { openid: '0000' };\n  private shortMsg = '完善个人信息，可使用信用卡支付';\n  private stateMsg = '未签约';\n  private formData: FORMDATA = {};\n  private isAdmin = false;\n  // private formData: FORMDATA = {\n  //   id: '123456789123456789',\n  //   name: 'testman',\n  //   phone: '12345678912',\n  //   code: '1234',\n  // };\n\n  private registerData: register.DATA = {};\n\n  private uploadCustomFileList: any[] = [];\n  private uploadCustomFileUrl: string[] = [];\n  private uploadImageCallback: any;\n\n  private mounted() {\n    this.loginUser = user.get() as user.User;\n    this.isAdmin = utils.IsAdmin();\n    this.RegisterWeUI();\n    this.RequestRegisterData();\n  }\n\n  private RequestRegisterData() {\n    const openid = this.loginUser.openid;\n    const host = define.API_HOST;\n    const api = host + '/sunnyhouse/register?openid=' + openid;\n    Vue.axios.get(api).then((response) => {\n      const data = response.data;\n      console.log('RegisterData', data);\n      if (data && data.code === 'SUCCESS') {\n        const userData = data.data as register.DATA;\n        if (userData) {\n          this.formData = { ...userData };\n          this.registerData = { ...userData };\n          this.stateMsg = '资料已提交，等待管理员审核';\n        }\n      }\n    });\n  }\n\n  private RegisterWeUI() {\n    const that = this;\n    const host = define.API_HOST;\n    weui.uploader('#uploaderCustom', {\n      url: host + '/sunnyhouse/upload',\n      auto: false,\n      onQueued() {\n        that.uploadCustomFileList.push(this);\n        // 打算上传新的话，先清空原来的\n        that.registerData.idimgurl = [];\n      },\n      onBeforeQueued(files: any) {\n        if (['image/jpg', 'image/jpeg', 'image/png', 'image/gif'].indexOf(this.type) < 0) {\n          weui.alert('请上传图片');\n          return false;\n        }\n        if (this.size > 10 * 1024 * 1024) {\n          weui.alert('请上传不超过10M的图片');\n          return false;\n        }\n        const cnt = files.length + that.uploadCustomFileList.length;\n        const maxCnt = 2;\n        if (cnt > maxCnt) {\n          weui.alert(`最多只能上传${maxCnt}张图片，请重新选择`);\n          return false;\n        }\n      },\n      onSuccess(ret: { code: string, data: { [key: string]: string } }) {\n        console.log('onSuccess', this, ret);\n        if (ret.data && ret.data.url) {\n          that.uploadCustomFileUrl.push(ret.data.url);\n        } else {\n          that.uploadCustomFileUrl.push('error');\n        }\n        if (that.uploadCustomFileUrl.length === that.uploadCustomFileList.length) {\n          that.uploadImageCallback(that.uploadCustomFileUrl);\n        }\n      },\n      onError(err: any) {\n        console.log(this, err);\n        that.uploadCustomFileUrl.push('error');\n        if (that.uploadCustomFileUrl.length === that.uploadCustomFileList.length) {\n          that.uploadImageCallback(that.uploadCustomFileUrl);\n        }\n      },\n    });\n  }\n\n  private uploadImage(cb: (url: string[]) => void) {\n    this.uploadImageCallback = cb;\n    this.uploadCustomFileUrl = [];\n    this.uploadCustomFileList.forEach((file) => {\n      file.upload();\n    });\n  }\n\n  private onPreviewImg(e: any) {\n    let target = e.target;\n    while (!target.classList.contains('weui-uploader__file') && target) {\n      target = target.parentNode;\n    }\n    if (!target) { return; }\n\n    let url = target.getAttribute('style') || '';\n    const id = parseInt(target.getAttribute('data-id'), 10);\n    if (url) {\n      url = url.match(/url\\((.*?)\\)/)[1].replace(/\"/g, '');\n    }\n    const that = this;\n    const gallery = weui.gallery(url, {\n      onDelete() {\n        weui.confirm('确定删除该图片？', () => {\n          let index;\n          for (let i = 0, len = that.uploadCustomFileList.length; i < len; ++i) {\n            const file = that.uploadCustomFileList[i];\n            if (file.id === id) {\n              index = i;\n              break;\n            }\n          }\n          if (index !== undefined) {\n            that.uploadCustomFileList.splice(index, 1);\n          }\n          target.remove();\n          gallery.hide();\n        });\n      },\n    });\n  }\n\n  private onSubmit() {\n    weui.form.validate('#form', (error: { dom: object, msg: string }) => {\n      if (!error) {\n        if (this.registerData.idimgurl && this.registerData.idimgurl.length === 2) {\n          if (JSON.stringify(this.formData) === JSON.stringify(this.registerData)) {\n            weui.alert('数据没有变化，无需重复提交');\n            return;\n          }\n          this.PostFormData();\n        } else {\n          if (this.uploadCustomFileList.length < 2) {\n            weui.alert('请上传身份证正反面照片各一张');\n            return;\n          }\n          const loading = weui.loading('提交中...');\n          this.uploadImage((urls: string[]) => {\n            loading.hide();\n            if (urls.indexOf('error') !== -1) {\n              weui.alert('照片上传失败，请重试');\n            } else {\n              this.formData.idimgurl = urls;\n              this.PostFormData();\n            }\n          });\n        }\n      }\n    }, {\n        regexp: {\n          IDNUM: /(?:^\\d{15}$)|(?:^\\d{18}$)|^\\d{17}[\\dXx]$/,\n        },\n      },\n    );\n  }\n\n  private PostFormData() {\n    this.formData.openid = this.loginUser.openid;\n    this.formData.headimgurl = this.loginUser.headimgurl;\n    this.formData.state = register.STATE.reviewing;\n    const host = define.API_HOST;\n    const api = host + '/sunnyhouse/register';\n    console.log('PostFormData', api, this.formData);\n    Vue.axios.post(api, this.formData).then((response) => {\n      const data = response.data;\n      if (data.code === 'SUCCESS') {\n        if (data.msg) {\n          weui.alert('提交异常\\n' + data.msg);\n        } else {\n          weui.toast('提交成功', 1000);\n        }\n      } else {\n        weui.alert('网络异常\\n' + response);\n      }\n    });\n  }\n\n  private onGetVerificationCode() {\n    weui.toast('验证码已发送', {\n      duration: 1000,\n    });\n  }\n\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Register.vue?vue&type=template&id=00ab3faa&\"\nimport script from \"./Register.vue?vue&type=script&lang=ts&\"\nexport * from \"./Register.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Register.vue\"\nexport default component.exports"],"sourceRoot":""}