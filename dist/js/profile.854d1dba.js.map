{"version":3,"sources":["webpack:///./src/utils/utils.ts","webpack:///./src/views/Profile.vue?bd4f","webpack:///./src/views/Profile.vue?c4ea","webpack:///./src/views/Profile.vue?48f0","webpack:///./src/views/Profile.vue"],"names":["__webpack_require__","d","__webpack_exports__","IsAdmin","_models_user__WEBPACK_IMPORTED_MODULE_0__","u","ids","indexOf","openid","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","staticStyle","position","margin-right","width","display","attrs","src","registerData","headimgurl","_s","name","font-size","color","StateDesc","state","_l","key","index","PropDesc","id","idimgurl","length","imgurl","style","background-image","on","click","$event","previewImg","idx","showContract","_m","addContract","_e","onSubmit","staticRenderFns","weui","Profilevue_type_script_lang_ts_Profile","_super","Profile","_this","apply","arguments","isAdmin","tslib_es6","prototype","mounted","utils","$route","query","user","RequestRegisterInfo","$router","push","host","define","api","vue_property_decorator","axios","get","then","response","data","console","log","code","bPass","register","reviewed","reviewing","post","msg","alert","go","catch","reason","k","gallery","Profilevue_type_script_lang_ts_","views_Profilevue_type_script_lang_ts_","component","Object","componentNormalizer","options","__file"],"mappings":"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","file":"js/profile.854d1dba.js","sourcesContent":["import * as user from '@/models/user';\n\nexport function IsAdmin() {\n  const u = user.get();\n  const ids: string[] = ['10000', 'o7tJq08kMDWwUfW9dBE7B-xjNC3w'];\n  if (u) {\n    return ids.indexOf(u.openid as string) !== -1;\n  }\n  return false;\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"Profile\"},[_c('div',{staticClass:\"weui-cells__title\"},[_vm._v(\"个人资料\")]),_c('div',{staticClass:\"weui-cells\"},[_c('div',{staticClass:\"weui-cell\"},[_c('div',{staticClass:\"weui-cell__hd\",staticStyle:{\"position\":\"relative\",\"margin-right\":\"10px\"}},[_c('img',{staticStyle:{\"width\":\"50px\",\"display\":\"block\"},attrs:{\"src\":_vm.registerData.headimgurl}})]),_c('div',{staticClass:\"weui-cell__bd\"},[_c('p',[_vm._v(_vm._s(_vm.registerData.name))]),_c('p',{staticStyle:{\"font-size\":\"13px\",\"color\":\"rgb(136, 136, 136)\"}},[_vm._v(_vm._s(_vm.StateDesc(_vm.registerData.state)))])])]),_vm._l((['name', 'id', 'phone']),function(key,index){return _c('div',{key:index,staticClass:\"weui-cell\"},[_c('div',{staticClass:\"weui-cell__bd\"},[_c('p',[_vm._v(_vm._s(_vm.PropDesc(key)))])]),_c('div',{staticClass:\"weui-cell__ft\"},[_vm._v(_vm._s(_vm.registerData[key]))])])}),_c('div',{staticClass:\"weui-cell\",attrs:{\"id\":\"uploaderCustom\"}},[_c('div',{staticClass:\"weui-cell__bd\"},[_c('div',{staticClass:\"weui-uploader\"},[_c('div',{staticClass:\"weui-uploader__hd\"},[_c('p',{staticClass:\"weui-uploader__title\"},[_vm._v(\"身份证正反面照片(\"+_vm._s(_vm.registerData.idimgurl ? _vm.registerData.idimgurl.length : 0)+\"/2)\")])]),_c('div',{staticClass:\"weui-uploader__bd\"},[_c('ul',{staticClass:\"weui-uploader__files\",attrs:{\"id\":\"uploaderCustomFiles\"}},_vm._l((_vm.registerData.idimgurl),function(imgurl,index){return _c('li',{key:index,staticClass:\"weui-uploader__file\",style:({'background-image': 'url(' + imgurl + ')'}),on:{\"click\":function($event){_vm.previewImg(imgurl)}}})}),0)])])])])],2),_c('div',[_c('div',{staticClass:\"weui-cells__title\"},[_vm._v(\"合约列表\")]),_c('div',{staticClass:\"weui-cells\"},[(_vm.registerData.contractid)?_c('div',_vm._l((_vm.registerData.contractid),function(id,idx){return _c('a',{key:idx,staticClass:\"weui-cell weui-cell_access\",on:{\"click\":function($event){_vm.showContract(id)}}},[_c('div',{staticClass:\"weui-cell__bd\"},[_c('p',[_vm._v(\"电子合约\"+_vm._s(idx+1))])]),_c('div',{staticClass:\"weui-cell__ft\"})])}),0):_c('div',[_vm._m(0)])]),(_vm.isAdmin)?_c('div',{staticClass:\"weui-cells\"},[_c('a',{staticClass:\"weui-cell weui-cell_access\",on:{\"click\":function($event){_vm.addContract()}}},[_vm._m(1),_c('div',{staticClass:\"weui-cell__ft\"})])]):_vm._e()]),(_vm.isAdmin)?_c('div',{staticClass:\"weui-btn-area\"},[(_vm.registerData.state === 1)?_c('a',{staticClass:\"weui-btn weui-btn_primary\",on:{\"click\":function($event){_vm.onSubmit(true)}}},[_vm._v(\"审核通过\")]):_vm._e(),_c('a',{staticClass:\"weui-btn weui-btn_default\",on:{\"click\":function($event){_vm.onSubmit(false)}}},[_vm._v(\"打回重填\")])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"weui-loadmore weui-loadmore_line\"},[_c('span',{staticClass:\"weui-loadmore__tips\"},[_vm._v(\"暂无数据\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"weui-cell__bd\"},[_c('p',[_vm._v(\"新增合约\")])])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator';\nconst weui = require('weui.js');\nimport * as user from '@/models/user';\nimport * as register from '@/models/register';\nimport * as define from '@/defines/define';\nimport * as utils from '@/utils/utils';\n\n@Component\nexport default class Profile extends Vue {\n  private openid: string | undefined = '';\n  private registerData: register.DATA = {};\n  private isAdmin = false;\n  private mounted() {\n    this.isAdmin = utils.IsAdmin();\n    this.openid = this.$route.query.openid as string;\n    if (!this.openid) {\n      this.openid = user.get() ? (user.get() as user.User).openid : '';\n    }\n    if (!this.openid) {\n      this.$router.push('/login');\n      return;\n    }\n    this.RequestRegisterInfo(this.openid);\n  }\n\n  private RequestRegisterInfo(openid?: string) {\n    const host = define.API_HOST;\n    const api = host + '/sunnyhouse/register?openid=' + openid;\n    Vue.axios.get(api).then((response) => {\n      const data = response.data;\n      console.log('RegisterInfo', data);\n      if (data && data.code === 'SUCCESS') {\n        this.registerData = data.data as register.DATA;\n      }\n    });\n  }\n\n  private onSubmit(bPass: boolean) {\n    const host = define.API_HOST;\n    const api = host + '/sunnyhouse/register/state';\n    const state = bPass ? register.STATE.reviewed : register.STATE.reviewing;\n    Vue.axios.post(api, { openid: this.openid, state }).then((response) => {\n      const data = response.data;\n      console.log('RegisterInfo', data);\n      if (data && data.msg) {\n        weui.alert('提交失败:' + data.msg);\n      } else if (data && data.code === 'SUCCESS') {\n        this.$router.go(-1);\n      } else {\n        weui.alert('服务器异常:' + response);\n      }\n    }).catch((reason) => {\n      weui.alert('网络异常:' + reason);\n    });\n  }\n\n  private PropDesc(k: string): string {\n    return register.PropDesc[k];\n  }\n\n  private StateDesc(k: number): string {\n    return register.StateDesc[k];\n  }\n\n  private previewImg(imgurl: string) {\n    weui.gallery(imgurl);\n  }\n\n  private showContract(id: string) {\n    this.$router.push('contract?contractid=' + id);\n  }\n\n  private addContract() {\n    this.$router.push('contract?openid=' + this.openid);\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/ts-loader/index.js??ref--12-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Profile.vue?vue&type=template&id=1f7d438b&\"\nimport script from \"./Profile.vue?vue&type=script&lang=ts&\"\nexport * from \"./Profile.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Profile.vue\"\nexport default component.exports"],"sourceRoot":""}