(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["genorder"],{3646:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"GenOrder"},[a("div",{staticClass:"weui-cells"},[a("div",{staticClass:"weui-cell"},[a("div",{staticClass:"weui-cell__hd",staticStyle:{position:"relative","margin-right":"10px"}},[a("img",{staticStyle:{width:"50px",display:"block"},attrs:{src:t.registerData.headimgurl}})]),a("div",{staticClass:"weui-cell__bd"},[a("p",[t._v(t._s(t.registerData.name))]),a("p",{staticStyle:{"font-size":"13px",color:"rgb(136, 136, 136)"}},[t._v("签订电子合约")])])])]),a("div",{attrs:{id:"form"}},[a("div",{staticClass:"weui-cells__title"},[t._v("账单详情")]),a("div",{staticClass:"weui-cells weui-cells_form"},[a("div",{staticClass:"weui-cell"},[t._m(0),a("div",{staticClass:"weui-cell__bd"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.formData.room,expression:"formData.room",modifiers:{number:!0}}],staticClass:"weui-input",attrs:{required:"",type:"number",placeholder:"请输入房间号"},domProps:{value:t.formData.room},on:{input:function(e){e.target.composing||t.$set(t.formData,"room",t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}})])]),a("div",{staticClass:"weui-cell"},[t._m(1),a("div",{staticClass:"weui-cell__bd"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.formData.rent,expression:"formData.rent",modifiers:{number:!0}}],staticClass:"weui-input",attrs:{required:"",type:"number",placeholder:"请输入月租"},domProps:{value:t.formData.rent},on:{blur:[t.onInputBlur,function(e){t.$forceUpdate()}],input:function(e){e.target.composing||t.$set(t.formData,"rent",t._n(e.target.value))}}})])]),a("div",{staticClass:"weui-cell"},[t._m(2),a("div",{staticClass:"weui-cell__bd"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.formData.deposit,expression:"formData.deposit",modifiers:{number:!0}}],staticClass:"weui-input",attrs:{required:"",type:"number",placeholder:"请输入押金"},domProps:{value:t.formData.deposit},on:{blur:[t.onInputBlur,function(e){t.$forceUpdate()}],input:function(e){e.target.composing||t.$set(t.formData,"deposit",t._n(e.target.value))}}})])]),a("div",{staticClass:"weui-cell"},[t._m(3),a("div",{staticClass:"weui-cell__bd"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.waterFee,expression:"waterFee",modifiers:{number:!0}}],staticClass:"weui-input",attrs:{required:"",type:"number",placeholder:"请输入水费",disabled:"disabled"},domProps:{value:t.waterFee},on:{input:function(e){e.target.composing||(t.waterFee=t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}})])]),a("div",{staticClass:"weui-cell"},[t._m(4),a("div",{staticClass:"weui-cell__bd"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.electricityFee,expression:"electricityFee",modifiers:{number:!0}}],staticClass:"weui-input",attrs:{required:"",type:"number",placeholder:"请输入电费",disabled:"disabled"},domProps:{value:t.electricityFee},on:{input:function(e){e.target.composing||(t.electricityFee=t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}})])]),a("div",{staticClass:"weui-cell"},[t._m(5),a("div",{staticClass:"weui-cell__bd"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.formData.wifi,expression:"formData.wifi",modifiers:{number:!0}}],staticClass:"weui-input",attrs:{required:"",type:"number",placeholder:"请输入Wi-Fi费用"},domProps:{value:t.formData.wifi},on:{blur:[t.onInputBlur,function(e){t.$forceUpdate()}],input:function(e){e.target.composing||t.$set(t.formData,"wifi",t._n(e.target.value))}}})])]),a("div",{staticClass:"weui-cell"},[t._m(6),a("div",{staticClass:"weui-cell__bd"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.formData.trash,expression:"formData.trash",modifiers:{number:!0}}],staticClass:"weui-input",attrs:{required:"",type:"number",placeholder:"请输入垃圾处理费"},domProps:{value:t.formData.trash},on:{blur:[t.onInputBlur,function(e){t.$forceUpdate()}],input:function(e){e.target.composing||t.$set(t.formData,"trash",t._n(e.target.value))}}})])]),a("div",{staticClass:"weui-cell"},[t._m(7),a("div",{staticClass:"weui-cell__bd"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.formData.total,expression:"formData.total",modifiers:{number:!0}}],staticClass:"weui-input",attrs:{required:"",type:"number",placeholder:"请输入总计费用",disabled:"disabled"},domProps:{value:t.formData.total},on:{input:function(e){e.target.composing||t.$set(t.formData,"total",t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}})])])]),a("div",{staticClass:"weui-cells__title"},[t._v("抄表记录")]),a("div",{staticClass:"weui-cells weui-cells_form"},[a("div",{staticClass:"weui-cell"},[t._m(8),a("div",{staticClass:"weui-cell__bd"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.formData.lastwatercnt,expression:"formData.lastwatercnt",modifiers:{number:!0}}],staticClass:"weui-input",attrs:{required:"",type:"number",placeholder:"请输入上次水表读数"},domProps:{value:t.formData.lastwatercnt},on:{blur:[t.onInputBlur,function(e){t.$forceUpdate()}],input:function(e){e.target.composing||t.$set(t.formData,"lastwatercnt",t._n(e.target.value))}}})])]),a("div",{staticClass:"weui-cell"},[t._m(9),a("div",{staticClass:"weui-cell__bd"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.formData.watercnt,expression:"formData.watercnt",modifiers:{number:!0}}],staticClass:"weui-input",attrs:{required:"",type:"number",placeholder:"请输入当次水表读数"},domProps:{value:t.formData.watercnt},on:{blur:[t.onInputBlur,function(e){t.$forceUpdate()}],input:function(e){e.target.composing||t.$set(t.formData,"watercnt",t._n(e.target.value))}}})])]),a("div",{staticClass:"weui-cell"},[t._m(10),a("div",{staticClass:"weui-cell__bd"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.formData.lastelectricitycnt,expression:"formData.lastelectricitycnt",modifiers:{number:!0}}],staticClass:"weui-input",attrs:{required:"",type:"number",placeholder:"请输入上次电表读数"},domProps:{value:t.formData.lastelectricitycnt},on:{blur:[t.onInputBlur,function(e){t.$forceUpdate()}],input:function(e){e.target.composing||t.$set(t.formData,"lastelectricitycnt",t._n(e.target.value))}}})])]),a("div",{staticClass:"weui-cell"},[t._m(11),a("div",{staticClass:"weui-cell__bd"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.formData.electricitycnt,expression:"formData.electricitycnt",modifiers:{number:!0}}],staticClass:"weui-input",attrs:{required:"",type:"number",placeholder:"请输入当次电表读数"},domProps:{value:t.formData.electricitycnt},on:{blur:[t.onInputBlur,function(e){t.$forceUpdate()}],input:function(e){e.target.composing||t.$set(t.formData,"electricitycnt",t._n(e.target.value))}}})])]),a("div",{staticClass:"weui-cell"},[t._m(12),a("div",{staticClass:"weui-cell__bd"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.fromdate,expression:"formData.fromdate"}],staticClass:"weui-input",attrs:{type:"date",required:"",emptyTips:"请输入开始日期"},domProps:{value:t.formData.fromdate},on:{input:function(e){e.target.composing||t.$set(t.formData,"fromdate",e.target.value)}}})])]),a("div",{staticClass:"weui-cell"},[t._m(13),a("div",{staticClass:"weui-cell__bd"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.todate,expression:"formData.todate"}],staticClass:"weui-input",attrs:{type:"date",required:"",emptyTips:"请输入结束日期"},domProps:{value:t.formData.todate},on:{input:function(e){e.target.composing||t.$set(t.formData,"todate",e.target.value)}}})])])])]),a("div",{staticClass:"weui-btn-area"},[a("a",{staticClass:"weui-btn weui-btn_primary",on:{click:t.onSubmit}},[t._v("生成订单")])])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("房间号")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("月租")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("押金")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("水费")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("电费")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("Wi-Fi")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("垃圾处理费")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("总计")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("上次水表")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("当次水表")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("上次电表")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("当次电表")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label"},[t._v("开始日期")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"weui-cell__hd"},[a("label",{staticClass:"weui-label",attrs:{for:""}},[t._v("结束日期")])])}],s=a("9ab4"),l=a("60a3"),o=a("56f2"),n=a("a29c"),c=a("73ec"),u=a("57c4"),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.orderData={},e.formData={},e.registerData={},e}return s["c"](e,t),e.prototype.mounted=function(){if(c["a"]()){var t=this.$route.query.orderid,e=this.$route.query.contractid;t?this.RequestOrderInfo(t):e?this.InitFormData(e):this.$router.push("/")}else this.$router.push("/")},e.prototype.RequestOrderInfo=function(t){var e=this,a=n["a"],i=a+"/sunnyhouse/orderid?orderid="+t;l["b"].axios.get(i).then(function(t){var a=t.data;if(console.log("OrderInfo",a),a&&!a.msg){var i=a.data;e.orderData=s["a"]({},i),e.formData=s["a"]({},i),e.RequestRegisterInfo(i.openid)}else e.$router.push("/")})},e.prototype.RequestRegisterInfo=function(t){var e=this,a=n["a"],i=a+"/sunnyhouse/register?openid="+t;l["b"].axios.get(i).then(function(t){var a=t.data;console.log("RegisterInfo",a),a&&"SUCCESS"===a.code&&(e.registerData=a.data,e.formData.openid=e.registerData.openid)})},e.prototype.InitFormData=function(t){var e=this,a=this.formData;a.contractid=t,a.trash=5,a.fromdate=(new Date).toJSON().substr(0,10),a.todate=(new Date).toJSON().substr(0,10);var i=n["a"],r=i+"/sunnyhouse/contract?contractid="+t;l["b"].axios.get(r).then(function(t){var r=t.data;if(console.log("ContractInfo",r),r&&"SUCCESS"===r.code){var s=r.data;if(a.room=s.room,a.openid=s.openid,e.RequestRegisterInfo(s.openid),s.orderid&&s.orderid.length>0){var o=s.orderid[s.orderid.length-1],n=i+"/sunnyhouse/order?orderid="+o;l["b"].axios.get(n).then(function(t){var e=t.data;if(console.log("OrderInfo",e),e&&e.data){var i=e.data;a.lastwatercnt=i.watercnt,a.lastelectricitycnt=i.electricitycnt,a.rent=i.rent,a.deposit=0,a.wifi=i.wifi}})}else a.lastwatercnt=s.watercnt,a.lastelectricitycnt=s.electricitycnt,a.rent=s.rent,a.deposit=s.rent,a.wifi=0}})},e.prototype.GetPropName=function(t){return o["a"][t]},e.prototype.GetPropValue=function(t){return this.orderData[t]},e.prototype.onSubmit=function(){var t=this;u.form.validate("#form",function(e){if(e)console.log(e);else var a=u.confirm("确定提交？",function(){a.hide(t.PostFormData)})})},e.prototype.PostFormData=function(){var t=this,e=n["a"],a=e+"/sunnyhouse/order";console.log("PostFormData",a,this.formData),l["b"].axios.post(a,this.formData).then(function(e){var a=e.data;console.log("PostFormDataRes",a),"SUCCESS"===a.code?a.msg?u.alert("提交异常:"+a.msg):(u.toast("提交成功",1e3),setTimeout(function(){t.$router.go(-1)},1e3)):u.alert("服务器异常:"+e)}).catch(function(t){console.log(t),u.alert("网络异常:"+t)})},e.prototype.onInputBlur=function(){this.CalcTotal()},e.prototype.CalcTotal=function(){var t=0,e=this.formData;t+=e.rent,t+=e.deposit,t+=e.water,t+=e.electricity,t+=e.wifi,t+=e.trash,this.formData.total=t},Object.defineProperty(e.prototype,"waterFee",{get:function(){var t=this.formData.watercnt?this.formData.watercnt:0,e=this.formData.lastwatercnt?this.formData.lastwatercnt:0;return this.formData.water=2.5*(t-e),this.formData.water},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"electricityFee",{get:function(){var t=this.formData.electricitycnt?this.formData.electricitycnt:0,e=this.formData.lastelectricitycnt?this.formData.lastelectricitycnt:0;return this.formData.electricity=1.5*(t-e),this.formData.electricity},enumerable:!0,configurable:!0}),e=s["b"]([l["a"]],e),e}(l["b"]),m=d,f=m,p=a("2877"),v=Object(p["a"])(f,i,r,!1,null,null,null);v.options.__file="GenOrder.vue";e["default"]=v.exports},"56f2":function(t,e,a){"use strict";a.d(e,"a",function(){return i});var i={orderid:"订单号",createdtime:"创建时间",rent:"租金",deposit:"押金",wifi:"Wi-Fi",trash:"垃圾处理费",water:"水费",electricity:"电费",total:"总计",lastwatercnt:"上期水表",lastelectricitycnt:"上期电表",watercnt:"本期水表",electricitycnt:"本期电表",fromdate:"开始时间",todate:"结束时间",transaction_id:"微信订单号",finishedtime:"支付时间"}}}]);
//# sourceMappingURL=genorder.b508aed4.js.map